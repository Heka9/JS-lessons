<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Task-6</title>
      <link rel="stylesheet" href="../css/style.css" />
      <style>
         input[type='number']::-webkit-outer-spin-button,
         input[type='number']::-webkit-inner-spin-button {
            -webkit-appearance: none;
         }
         .homework__wrapper {
            padding: 30px 0px;
         }
         .homework__block_actions {
            display: flex;
            align-items: center;
            gap: 20px;
         }
         .homework__block:not(:last-child) {
            margin-bottom: 20px;
         }
         .homework__block:last-child {
            padding-top: 20px;
         }
         .homework__block_pt-20 {
            padding-top: 20px;
         }
         .homework__label {
            font-size: 20px;
            display: grid;
            grid-template-columns: 30% 1fr;
            align-items: center;
         }
         .homework__action {
            padding: 5px 15px;
            border-radius: 2px;
            background-color: #d3d3d3;
            border: 1px solid black;
            color: black;
            transition: all 0.3s ease 0s;
         }
         .homework__action:hover,
         .homework__action:focus {
            outline: none;
            background-color: rgb(228, 228, 228);
            box-shadow: 3px 3px 5px 0px rgba(0, 0, 0, 0.3);
         }
         .input {
            border: 1px solid black;
            border-radius: 2px;
            height: 36px;
            padding: 0px 10px;
            font-size: 18px;
            transition: all 0.3s ease 0s;
         }
         .input::placeholder {
            color: grey;
         }
         .input:focus {
            outline: none;
            box-shadow: 3px 3px 5px 0px rgba(0, 0, 0, 0.3);
         }
         .table {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            padding: 10px;
         }
         .table__input {
            border: 1px solid black;
            border-radius: 2px;
            padding: 0px 10px;
            height: 30px;
         }
      </style>
   </head>

   <body>
      <div class="wrapper">
         <div class="block__container">
            <h3 class="title">Задача 6</h3>
            <p>
               Задача 6. Користувач задає кількість оцінок і натискає на кнопку «get table». В результаті формується
               таблиця з input, куди користувач вводить оцінки. Після цього натискає на кнопку “get sum” і знаходить
               середнє значення.
            </p>
            <div>
               <img src="../img/task-03.png" alt="" />
            </div>

            <div class="homework__wrapper">
               <div class="homework__block">
                  <label for="price-number" class="homework__label"
                     >Price number
                     <input id="price-number" type="number" class="homework__price-number input" placeholder="0" />
                  </label>
               </div>
               <div class="homework__block homework__block_actions">
                  <button type="button" class="homework__action create-table">Get table</button>
               </div>
               <hr />
               <div class="table"></div>
               <hr />
               <div class="homework__block homework__block_actions homework__block_pt-20">
                  <button type="button" class="homework__action get-sum">Get sum</button>
               </div>
               <div class="avarage-value"></div>
            </div>
            <script>
               function tableFunc() {
                  const tableElementsNumber = parseInt(document.querySelector('.homework__price-number').value)
                  createTable(tableElementsNumber)
               }
               function createTable(elementsQuntity) {
                  const tableContainer = document.querySelector('.table')

                  for (let i = 0; i < elementsQuntity; i++) {
                     const table = document.createElement('div')

                     const input = document.createElement(`input`)
                     input.setAttribute('type', 'number')
                     input.classList.add('table__input')

                     table.prepend(input)
                     tableContainer.prepend(table)
                  }
               }
               function getSumFunc() {
                  const tableInputsArray = document.querySelectorAll('.table__input')

                  const totalInputsValue = [].reduce.call(
                     tableInputsArray,
                     (prevSum, input) => prevSum + parseInt(input.value),
                     0
                  )
                  const avarageValue = totalInputsValue / tableInputsArray.length

                  const avarageValueBlock = document.querySelector('.avarage-value')
                  avarageValueBlock.innerHTML = `Avarage sum = ${avarageValue}`
               }

               const createTableButton = document.querySelector('.create-table')
               createTableButton.onclick = tableFunc

               const getSumButton = document.querySelector('.get-sum')
               getSumButton.onclick = getSumFunc
            </script>
         </div>
      </div>
   </body>
</html>
