<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Task-5</title>
      <link rel="stylesheet" href="../css/style.css" />
   </head>

   <body>
      <div class="wrapper">
         <div class="block__container">
            <h3 class="title">Задача 5</h3>
            <p>
               5. Особиста бібліотека. Картотека домашньої бібліотеки: дані книги (автори (піб, рік народження, короткий
               опис), назва книги, жанр, видавництво (назва, реєстраційний номер, рік засування)). Реалізувати розділи
               бібліотеки (спеціальна література, хобі, домашнє господарство і т.д.), походження книги і наявність на
               даний час. Організувати додавання/вилучення книг та вибір книг за назвою, за ПІБ автора, за видавництвом.
            </p>

            <script>
               class Author {
                  constructor(name, bornYear, description) {
                     this.name = name
                     this.bornYear = bornYear
                     this.description = description
                  }
               }

               const author1 = new Author('Taras Shevchenko', 1814, 'description')
               const author2 = new Author('Joanne Rowling', 1965, 'some description')
               const author3 = new Author('George Orwell', 1903, 'some new description')
               const author4 = new Author('Ivan Ivanov', 1950, 'some new descr')

               class Publish {
                  constructor(title, id, foundationYear) {
                     this.title = title
                     this.id = id
                     this.foundationYear = foundationYear
                  }
               }

               const publish1 = new Publish('Ababagalamaga', 11, 1992)
               const publish2 = new Publish('Yakaboo', 9, 1995)
               const publish3 = new Publish('Vivat', 4, 1994)
               const publish4 = new Publish('Print', 4, 1999)

               class Book {
                  constructor(authorObject, publishObject, title, genre, origin) {
                     this.author = authorObject
                     this.publish = publishObject
                     this.title = title
                     this.genre = genre
                     this.originСategory = origin
                  }
               }

               const book1 = new Book(author1, publish1, 'Kobzar', 'poetry', 'gift')
               const book2 = new Book(author2, publish2, 'Harry Potter', 'fantasy', 'gift')
               const book3 = new Book(author3, publish3, '1984', 'novel', 'purchase')
               const book4 = new Book(author4, publish4, 'The Adventure of the Speckled Band', 'detective', 'purchase')

               const booksArray = []
               booksArray.push(book1)
               booksArray.push(book2)
               booksArray.push(book3)

               class Library {
                  constructor(array) {
                     this.books = [...array]
                  }
                  showOriginСategory(bookTitle) {
                     return this.books.find((book) => book.title === bookTitle).originСategory
                  }
                  addBook(newBook) {
                     this.books.push(newBook)
                     // this.books = [...this.books, newBook]
                  }
                  removeBook(bookTitle) {
                     const bookIndex = this.books.findIndex((book) => book.title === bookTitle)
                     return this.books.splice(bookIndex, 1)
                  }
                  showCategories() {
                     //массив из значений жанров (повторение жанра тоже пушит в массив)
                     //можно добавить проверку на избежание дублирования жанра
                     const categoriesArray = []
                     this.books.forEach((book) => categoriesArray.push(book.genre))

                     //формирую сообщение в виде строке (повторение жанров тоже добавляется в строку)
                     // так же можно добавить доп проверку на повтор жанра в строке
                     let message = `В библиотеке есть:\n`
                     for (let i = 0; i < this.books.length; i++) {
                        message = message + `${i}. ${this.books[i].genre}, \n`
                        if (i === this.books.length - 1) {
                           message = message + `введите номер категории`
                        }
                     }

                     //спрашиваю номер категории
                     const userCategory = parseInt(prompt(message))

                     //отфильтровываю по соответствующему значению жанра
                     return this.books.filter((book) => book.genre === categoriesArray[userCategory])
                  }
                  isAvailableBook(title) {
                     return this.books.some((book) => book.title === title)
                  }
                  chooseBookByTitle(bookTitle) {
                     return this.books.find((book) => book.title === bookTitle)
                  }
                  chooseBookByAuthorName(authorName) {
                     return this.books.find((book) => book.author.name === authorName)
                  }
                  chooseBookByPublish(publishTitle) {
                     return this.books.find((book) => book.publish.title === publishTitle)
                  }
               }
               const homeLibrary = new Library(booksArray)
               console.log(homeLibrary)

               // console.log(homeLibrary.isAvailableBook('1984'))
               // homeLibrary.addBook(book4)
               // homeLibrary.removeBook('Kobzar')
               // console.log(homeLibrary.showOriginСategory('1984'))
               // console.log(homeLibrary.chooseBookByTitle('Harry Potter'))
               // console.log(homeLibrary.chooseBookByAuthorName('Taras Shevchenko'))
               // console.log(homeLibrary.chooseBookByPublish('Yakaboo'))
               // console.log(homeLibrary.showCategories())
            </script>
         </div>
      </div>
   </body>
</html>
